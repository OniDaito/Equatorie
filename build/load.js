// Generated by CoffeeScript 1.6.3
(function() {
  var loadAssets, _loadAniso, _loadBackingShader, _loadBaseNormal, _loadBasic, _loadEpicycleNormal, _loadLighting, _loadModel, _loadPicking, _loadPlateNormal, _loadPointerNormal, _loadRimNormal,
    _this = this;

  _loadLighting = function(obj, c) {
    var r;
    r = new CoffeeGL.Request('../shaders/basic_lighting.glsl');
    return r.get(function(data) {
      obj.shader = new CoffeeGL.Shader(data, {
        "uAmbientLightingColor": "uAmbientLightingColor"
      });
      return c.test();
    });
  };

  _loadAniso = function(obj, c) {
    var r;
    r = new CoffeeGL.Request('../shaders/anisotropic.glsl');
    return r.get(function(data) {
      obj.shader_aniso = new CoffeeGL.Shader(data, {
        "uAmbientLightingColor": "uAmbientLightingColor",
        "uSpecColour": "uSpecColour",
        "uSamplerNormal": "uSamplerNormal",
        "uAlphaX": "uAlphaX",
        "uAlphaY": "uAlphaY"
      });
      return c.test();
    });
  };

  _loadModel = function(obj, c) {
    var r;
    r = new CoffeeGL.Request('../models/equatorie.js');
    return r.get(function(data) {
      obj.equatorie_model = new CoffeeGL.JSONModel(data);
      return c.test();
    });
  };

  _loadBasic = function(obj, c) {
    var r;
    r = new CoffeeGL.Request('../shaders/basic.glsl');
    return r.get(function(data) {
      obj.shader_basic = new CoffeeGL.Shader(data, {
        "uColour": "uColour"
      });
      return c.test();
    });
  };

  _loadPicking = function(obj, c) {
    var r;
    r = new CoffeeGL.Request('../shaders/picking.glsl');
    return r.get(function(data) {
      obj.shader_picker = new CoffeeGL.Shader(data, {
        "uPickingColour": "uPickingColour"
      });
      return c.test();
    });
  };

  _loadEpicycleNormal = function(obj, c) {
    return obj.epicycle_normal = new CoffeeGL.Texture("../models/epicycle_NRM.jpg", {
      unit: 1
    }, function() {
      return c.test();
    });
  };

  _loadPlateNormal = function(obj, c) {
    return obj.plate_normal = new CoffeeGL.Texture("../models/plate_NRM.jpg", {
      unit: 1
    }, function() {
      return c.test();
    });
  };

  _loadRimNormal = function(obj, c) {
    return obj.rim_normal = new CoffeeGL.Texture("../models/ring_NRM.jpg", {
      unit: 1
    }, function() {
      return c.test();
    });
  };

  _loadPointerNormal = function(obj, c) {
    return obj.pointer_normal = new CoffeeGL.Texture("../models/label_NRM.jpg", {
      unit: 1
    }, function() {
      return c.test();
    });
  };

  _loadBaseNormal = function(obj, c) {
    return obj.base_normal = new CoffeeGL.Texture("../models/base_texture_NRM.jpg", {
      unit: 1
    }, function() {
      return c.test();
    });
  };

  _loadBackingShader = function(obj, c) {
    var r;
    r = new CoffeeGL.Request('../shaders/background.glsl');
    return r.get(function(data) {
      obj.shader_background = new CoffeeGL.Shader(data);
      return c.test();
    });
  };

  loadAssets = function(obj, signal, signal_progress) {
    var counter;
    counter = {};
    counter.test = function() {
      this.count--;
      this.signal_progress.dispatch((11 - this.count) / 11);
      if (this.count <= 0) {
        return this.signal.dispatch();
      }
    };
    _loadLighting(obj, counter);
    _loadModel(obj, counter);
    _loadBasic(obj, counter);
    _loadPicking(obj, counter);
    _loadAniso(obj, counter);
    _loadEpicycleNormal(obj, counter);
    _loadPlateNormal(obj, counter);
    _loadRimNormal(obj, counter);
    _loadPointerNormal(obj, counter);
    _loadBaseNormal(obj, counter);
    _loadBackingShader(obj, counter);
    counter.count = 11;
    counter.signal = signal;
    counter.signal_progress = signal_progress;
    return this;
  };

  module.exports = {
    loadAssets: loadAssets
  };

}).call(this);
