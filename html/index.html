<!--

equatorie.html

 -->

<!doctype html>

<!--[if lt IE 7]> 
  <meta http-equiv="refresh" content="5;url=http://www.webstandards.org/action/previous-campaigns/buc/upgrade/" />
 <![endif]-->
<!--[if IE 7 ]>    <html class="ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--> <html lang="en"> <!--<![endif]-->
<head>
<title>Equatorie</title>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

<meta name="description" content="">
<meta name="author" content="">

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="shortcut icon" href="/favicon.ico">

<link href="/css/bootstrap.min.css" media="all" rel="stylesheet" type="text/css" />
<link href="/css/equatorie.css" media="all" rel="stylesheet" type="text/css" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

</head>

<body>
    
<header>
</header>

<canvas id="webgl-canvas" style="border: none;" width="580" height="580"></canvas>

<script type="text/javascript" src="/js/coffeegl.js"></script>
<script type="text/javascript" src="/js/dat.gui.min.js"></script>
<script type="text/javascript" src="/js/ammo.fast.js"></script>

<script type="text/javascript" src="/js/jquery.js"></script>
<script type="text/javascript" src="/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/js/equatorie.js"></script>

<!-- <script src="http://192.168.2.14:8080/target/target-script-min.js"></script> -->

<!-- Main Controls -->

<div id ="equatorie_text">
<a data-toggle="modal" id="buttonAbout" href="#aboutModal" class="btn btn-info">About</a>
<a data-toggle="modal" href="#instructionsModal" class="btn btn-info">Instructions</a>

<!-- Buttons for the Actions we can perform -->
<div class="btn-group dropup" id="actionSelect">
  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
    Action <span class="caret"></span>
  </button>
  <ul class="dropdown-menu" role="menu">
    <li><a href="#" id="selectMercury">Mercury Longitude</a></li>
    <li><a href="#" id="selectVenus">Venus Longitude</a></li>
    <li><a href="#" id="selectMars">Mars Longitude</a></li>
    <li><a href="#" id="selectJupiter">Jupiter Longitude</a></li>
    <li><a href="#" id="selectSaturn">Saturn Longitude</a></li>
    <li class="divider"></li>
    <li><a href="#" id="selectSun">Sun Longitude</a></li>
    <li><a href="#" id="selectMoon">Moon Longitude</a></li>
    <li class="divider"></li>
    <li><a href="#" id="selectMoonLat">Moon Latitude</a></li>
  </ul>
</div>

<button id="button_next" type="button" class="btn btn-primary">Next Step</button>
<button id="button_reset" type="button" class="btn btn-danger">Reset</button>

</div>


<!-- Loading bar -->
<div id ="equatorie_loading">
  <div class="progress">
  <div class="progress-bar" id ="loadingProgressBar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
    <span class="sr-only"></span>
  </div>
</div>
</div>


<!-- About Box -->
<div class="modal fade" id="aboutModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h4 class="modal-title">Modal title</h4>
        </div>
        <div class="modal-body">
          ...
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save changes</button>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->


<!-- Instructions -->

<div class="modal fade" id="instructionsModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h4 class="modal-title">Modal title</h4>
        </div>
        <div class="modal-body">
          ...
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save changes</button>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->

<div id = "popupContainer">&nbsp;</div>

<script type="text/javascript">

loaded = function() {
  $('#equatorie_text').css({display: "block"});
  $('#equatorie_loading').css({display: "none"});

  window.EquatorieMovePOI.add(moving, this);
}

loading = function (loaded) {
  $('#loadingProgressBar').width(loaded * 100);
}

moving = function (pos) {
  $container.css({
    position: 'absolute',
    left: pos.x,
    top: pos.y
  });

  $(".popover").css({
    left: pos.x,
    top: pos.y
  });
}

window.EquatorieLoadProgress.add (loading, this);
window.EquatorieLoaded.addOnce(loaded, this);


// Functions for selectors for the planets

$("#selectMercury").click(function(){
  window.Equatorie.chosen_planet = "mercury"; 
  $("#button_next").show();
  $("#button_reset").show();
});

$("#selectVenus").click(function(){
  window.Equatorie.chosen_planet = "venus";
  $("#button_next").show();
  $("#button_reset").show();
});

$("#selectMars").click(function(){
  window.Equatorie.chosen_planet = "mars";
  $("#button_next").show();
  $("#button_reset").show();
});

$("#selectJupiter").click(function(){
  window.Equatorie.chosen_planet = "jupiter";
  $("#button_next").show();
  $("#button_reset").show();
});

$("#selectSaturn").click(function(){
  window.Equatorie.chosen_planet = "saturn";
  $("#button_next").show();
  $("#button_reset").show();
});

$("#selectSun").click(function(){
  window.Equatorie.chosen_planet = "sun";
  $("#button_next").show();
  $("#button_reset").show();
});

$("#selectMoon").click(function(){
  window.Equatorie.chosen_planet = "moon";
  $("#button_next").show();
  $("#button_reset").show();
});

$("#selectMoonLat").click(function(){
  window.Equatorie.chosen_planet = "moon_latitude";
  $("#button_next").show();
  $("#button_reset").show();
});

   

var $container = $('#popupContainer');

var options = {
    trigger: 'manual',
    placement: 'bottom'
};

$('#button_next').click( function() {

  if(window.Equatorie !== undefined) {
    $("#actionSelect").hide();
    nd = window.Equatorie.stepForward();

    if (nd.pos !== undefined){
      $container.css({
        position: 'absolute',
        left: nd.pos.x,
        top: nd.pos.y
      });
    }

    if (nd.text !== undefined){
      $container.popover('destroy');
    
      
      $container.popover($.extend({}, {
          content: nd.text
      }, options)).popover('show');


    } else {
      $container.popover('destroy');
   
    }
  }
});

$('#button_reset').click( function() {
  if(window.Equatorie !== undefined) {
    window.Equatorie.reset();
    $container.popover('destroy');
    $container.css({
      position: 'absolute',
      left: 0,
      top: 0
    });

    $("#button_next").hide();
    $("#actionSelect").show();
  }
});


//using HTML5 for fullscreen (only newest Chrome + FF)
//$("#mycanvas")[0].webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT); //Chrome
//$("#mycanvas")[0].mozRequestFullScreen(); //Firefox


//now i want to cancel fullscreen
//document.webkitCancelFullScreen(); //Chrome
//document.mozCancelFullScreen(); //Firefox

</script>


</body>

</html>
